---
layout: default
title: Bulk Utm Builder
---

<script src="/js/utm_urls.js"></script>
<div class="row">
  <div class="md-col-12">

    <button class="btn btn-primary" id="bt_update">Update</button>

    <!-- Tabs navigation -->
    <ul class="nav nav-tabs">
      <li role="presentation" class="active">
          <a href="#input_tab" aria-controls="input_tab" role="tab" data-toggle="tab">
              Input
          </a>
      </li>
      <li role="presentation">
          <a id="bt_tab_output" href="#output_tab" aria-controls="output_tab" role="tab" data-toggle="tab">
            Output <span id="output_tab_ready" style="visibility: hidden; color: #e21700" class="glyphicon glyphicon-bell" aria-hidden="true"></span>
          </a>
      </li>
    </ul>

    <div class="tab-content" style="padding-top: 1em;">

      <!-- Input Tab -->
      <div role="tabpanel" class="tab-pane fade in active" id="input_tab">
          <div class="form-group">
            <textarea id="input_text" class="form-control" rows="20"></textarea>
          </div>
      </div>

      <!-- Output Tab -->
      <div role="tabpanel" class="tab-pane fade" id="output_tab">
        <div class="form-group">
          <textarea id="output_text" class="form-control" rows="20"></textarea>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
    function update_callback(match, parts){
        url_parser.add_params(parts['query_params'], [['name','value']]);
        return url_parser.build_url(
                parts['scheme'],
                parts['host'],
                parts['path'],
                parts['query_params'],
                parts['hash']
        );
    }

    function update_urls(){
        var text = $('#input_text').val();
        var result = url_parser.replace(text, update_callback);
        $('#output_text').val(result);
        new_data_alert(true);
    }

    function new_data_alert(show){
        $('#output_tab_ready').css('visibility', show?'visible':'hidden');
    }

    $(document).ready(function(){
       $('#bt_update').on('click', function(){
            update_urls();
       });
       $('#bt_tab_output').on('click', function(){
           new_data_alert(false);
       });
    });
</script>
